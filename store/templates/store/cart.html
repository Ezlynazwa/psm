{% extends "store/basestore.html" %}
{% load static %}
{% block title %}Cart | Brew Beuty{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/cart.css' %}">

<h1>Beauty Cart</h1>

<form method="post" action="{% url 'store:checkout_select' %}">
    {% csrf_token %}
    <div class="cart-container">
        {% if items %}
                {% for item in items %}
            <div class="cart-card">
                <input type="checkbox" name="selected_items" value="{{ item.id }}" class="select-item">

                {% with images=item.product.product_images.all %}
                    {% if images %}
                        <img src="{{ images.0.image.url }}" alt="{{ item.product.name }}" width="100" height="100" style="object-fit: cover;">
                    {% else %}
                        <p>Tiada gambar</p>
                    {% endif %}
                {% endwith %}
                <div class="cart-info">
                    <h3>{{ item.product.name }}</h3>
                    <p>{{ item.product.description|truncatewords:15 }}</p>
                    <p>Quantity: {{ item.quantity }}</p>
                    <p>Price: RM {{ item.product.price }}</p>
                    <p>Subtotal: RM {{ item.get_total }}</p>
        </div>
    </div>
    {% else %}
    <p>Your cart is empty. Start shopping!</p>
    <a href="{% url 'store:catalog' %}" class="cta-button">Go to Catalog</a>
    {% endif %}
</section>
{% endblock %}
<!--nanti letak block extra css (boleh follow track_order.css)-->
<!--tapi ada problem sikit dengan untuk apply css masing2 ke dalam page tu....takleh nak chatgpt sbb takde line-->